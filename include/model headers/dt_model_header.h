// Auto-generated C++ header file
// Model Type: Decision Tree
// Generated on: 2026-02-17 17:53:42
// Info: Nodes: 277

#ifndef DT_MODEL_DATA_H
#define DT_MODEL_DATA_H

#include <cstdint>
#include <string.h>

#ifdef __AVR__
  #include <avr/pgmspace.h>
#else
  #ifndef PROGMEM
    #define PROGMEM
  #endif
  #ifndef pgm_read_byte
    #define pgm_read_byte(addr) (*(const uint8_t *)(addr))
  #endif
  #ifndef pgm_read_word
    #define pgm_read_word(addr) (*(const uint16_t *)(addr))
  #endif
  #ifndef pgm_read_float
    #define pgm_read_float(addr) (*(const float *)(addr))
  #endif
  #ifndef memcpy_P
    #define memcpy_P(dest, src, n) memcpy((dest), (src), (n))
  #endif
#endif

// Model Parameters
#define DT_FEATURE_COUNT 8
#define DT_TOTAL_NODES 277
#define DT_NUM_CLASSES 12
#define DT_MAX_DEPTH 10
#define DT_HAS_CONFIDENCE 1

// Class Names
static const char* DT_CLASS_NAMES[12] = {
    "camomile",
    "thoroughly minted infusion",
    "berry burst",
    "darjeeling blend",
    "decaf nutmeg and vanilla",
    "earl grey",
    "english breakfast tea",
    "fresh orange",
    "garden selection (lemon)",
    "green tea",
    "raspberry",
    "sweet cherry"
};

typedef struct {
    int8_t featureIndex;
    uint8_t label;
    float threshold;
    uint16_t majorityCount;
    uint16_t totalSamples;
    int16_t leftChild;
    int16_t rightChild;
} dt_node_t;

static const dt_node_t DT_NODES[277] PROGMEM = {
    {1, 255, -0.182330f, 198, 1710, 1, 2},
    {4, 255, -0.862259f, 174, 713, 3, 4},
    {1, 255, 0.381809f, 187, 997, 5, 6},
    {1, 255, -1.103577f, 148, 167, 7, 8},
    {6, 255, -0.049152f, 154, 546, 9, 10},
    {3, 255, 1.978798f, 166, 256, 11, 12},
    {2, 255, 0.559885f, 141, 741, 13, 14},
    {-1, 2, 0.000000f, 143, 143, -1, -1},
    {1, 255, -0.669441f, 18, 24, 15, 16},
    {2, 255, -0.346075f, 120, 389, 17, 18},
    {1, 255, -1.162722f, 118, 157, 19, 20},
    {3, 255, -0.399626f, 166, 227, 21, 22},
    {-1, 5, 0.000000f, 29, 29, -1, -1},
    {3, 255, 1.370949f, 138, 490, 23, 24},
    {1, 255, 0.951956f, 87, 251, 25, 26},
    {6, 255, 0.519464f, 6, 12, 27, 28},
    {-1, 1, 0.000000f, 12, 12, -1, -1},
    {2, 255, -2.166135f, 99, 146, 29, 30},
    {1, 255, -0.912077f, 118, 243, 31, 32},
    {0, 255, -0.703593f, 12, 25, 33, 34},
    {3, 255, -0.967054f, 114, 132, 35, 36},
    {4, 255, -0.927087f, 9, 28, 37, 38},
    {5, 255, -0.537820f, 166, 199, 39, 40},
    {4, 255, -0.764959f, 131, 406, 41, 42},
    {5, 255, 1.950840f, 51, 84, 43, 44},
    {5, 255, -0.227660f, 78, 96, 45, 46},
    {3, 255, -0.384707f, 77, 155, 47, 48},
    {1, 255, -0.680964f, 5, 6, 49, 50},
    {-1, 1, 0.000000f, 6, 6, -1, -1},
    {-1, 5, 0.000000f, 15, 15, -1, -1},
    {5, 255, 1.597712f, 99, 131, 51, 52},
    {2, 255, 0.170180f, 54, 76, 53, 54},
    {5, 255, -1.207766f, 110, 167, 55, 56},
    {1, 255, -1.457739f, 9, 13, 57, 58},
    {-1, 2, 0.000000f, 12, 12, -1, -1},
    {5, 255, -0.783157f, 14, 28, 59, 60},
    {1, 255, -0.350298f, 100, 104, 61, 62},
    {-1, 1, 0.000000f, 5, 5, -1, -1},
    {0, 255, 0.331747f, 9, 23, 63, 64},
    {3, 255, 0.032229f, 19, 34, 65, 66},
    {4, 255, 1.617156f, 153, 165, 67, 68},
    {6, 255, 0.775907f, 78, 111, 69, 70},
    {0, 255, 0.058674f, 108, 295, 71, 72},
    {5, 255, 0.193173f, 51, 76, 73, 74},
    {-1, 10, 0.000000f, 8, 8, -1, -1},
    {2, 255, 0.639835f, 71, 73, 75, 76},
    {7, 255, -0.763029f, 13, 23, 77, 78},
    {1, 255, 1.077730f, 63, 91, 79, 80},
    {4, 255, -1.085242f, 42, 64, 81, 82},
    {-1, 2, 0.000000f, 5, 5, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {0, 255, -1.244590f, 99, 118, 83, 84},
    {1, 255, -0.608205f, 7, 13, 85, 86},
    {4, 255, 1.728731f, 10, 24, 87, 88},
    {6, 255, -0.296973f, 47, 52, 89, 90},
    {3, 255, -1.098612f, 20, 25, 91, 92},
    {1, 255, -0.640691f, 105, 142, 93, 94},
    {-1, 8, 0.000000f, 9, 9, -1, -1},
    {-1, 1, 0.000000f, 4, 4, -1, -1},
    {0, 255, -0.059849f, 10, 13, 95, 96},
    {0, 255, 0.276121f, 14, 15, 97, 98},
    {-1, 1, 0.000000f, 100, 100, -1, -1},
    {-1, 11, 0.000000f, 3, 4, -1, -1},
    {6, 255, -0.351619f, 7, 8, 99, 100},
    {3, 255, -1.127574f, 9, 15, 101, 102},
    {-1, 11, 0.000000f, 10, 10, -1, -1},
    {4, 255, 0.413838f, 19, 24, 103, 104},
    {0, 255, 0.020518f, 152, 160, 105, 106},
    {0, 255, -1.019203f, 4, 5, 107, 108},
    {6, 255, -0.280194f, 78, 95, 109, 110},
    {5, 255, -0.858763f, 6, 16, 111, 112},
    {5, 255, 0.673946f, 49, 101, 113, 114},
    {1, 255, 0.760074f, 84, 194, 115, 116},
    {4, 255, 2.662646f, 24, 26, 117, 118},
    {0, 255, -1.218091f, 27, 50, 119, 120},
    {-1, 4, 0.000000f, 2, 3, -1, -1},
    {-1, 9, 0.000000f, 70, 70, -1, -1},
    {0, 255, 1.555865f, 7, 12, 121, 122},
    {2, 255, 0.730649f, 9, 11, 123, 124},
    {4, 255, -0.889358f, 7, 9, 125, 126},
    {0, 255, 1.340047f, 63, 82, 127, 128},
    {1, 255, 1.169939f, 8, 15, 129, 130},
    {4, 255, -0.621887f, 40, 49, 131, 132},
    {1, 255, -1.060843f, 80, 82, 133, 134},
    {4, 255, 1.634732f, 19, 36, 135, 136},
    {-1, 1, 0.000000f, 6, 6, -1, -1},
    {-1, 11, 0.000000f, 7, 7, -1, -1},
    {4, 255, 1.339533f, 10, 18, 137, 138},
    {-1, 7, 0.000000f, 6, 6, -1, -1},
    {3, 255, -1.146283f, 47, 48, 139, 140},
    {-1, 2, 0.000000f, 4, 4, -1, -1},
    {1, 255, -0.720773f, 4, 6, 141, 142},
    {1, 255, -0.349398f, 18, 19, 143, 144},
    {2, 255, 0.648611f, 32, 63, 145, 146},
    {4, 255, 1.742902f, 73, 79, 147, 148},
    {-1, 7, 0.000000f, 3, 3, -1, -1},
    {-1, 2, 0.000000f, 10, 10, -1, -1},
    {-1, 1, 0.000000f, 14, 14, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {-1, 7, 0.000000f, 7, 7, -1, -1},
    {-1, 6, 0.000000f, 1, 1, -1, -1},
    {-1, 6, 0.000000f, 6, 6, -1, -1},
    {-1, 9, 0.000000f, 9, 9, -1, -1},
    {1, 255, 0.026964f, 19, 20, 149, 150},
    {-1, 5, 0.000000f, 2, 4, -1, -1},
    {6, 255, 1.685981f, 152, 159, 151, 152},
    {-1, 9, 0.000000f, 1, 1, -1, -1},
    {-1, 11, 0.000000f, 1, 1, -1, -1},
    {-1, 8, 0.000000f, 4, 4, -1, -1},
    {1, 255, 0.484063f, 4, 11, 153, 154},
    {2, 255, -0.374629f, 78, 84, 155, 156},
    {-1, 10, 0.000000f, 5, 5, -1, -1},
    {4, 255, -0.913482f, 6, 11, 157, 158},
    {6, 255, 1.040025f, 21, 52, 159, 160},
    {6, 255, 0.819184f, 40, 49, 161, 162},
    {2, 255, -0.208522f, 30, 49, 163, 164},
    {5, 255, 1.166458f, 78, 145, 165, 166},
    {-1, 5, 0.000000f, 21, 21, -1, -1},
    {0, 255, -1.075923f, 3, 5, 167, 168},
    {5, 255, 1.343326f, 15, 16, 169, 170},
    {7, 255, 1.390915f, 16, 34, 171, 172},
    {0, 255, 1.086543f, 7, 9, 173, 174},
    {-1, 4, 0.000000f, 3, 3, -1, -1},
    {-1, 4, 0.000000f, 7, 7, -1, -1},
    {-1, 3, 0.000000f, 2, 4, -1, -1},
    {-1, 9, 0.000000f, 1, 1, -1, -1},
    {1, 255, 1.046017f, 7, 8, 175, 176},
    {7, 255, -0.666597f, 3, 9, 177, 178},
    {5, 255, -0.898702f, 61, 73, 179, 180},
    {5, 255, -0.463724f, 7, 8, 181, 182},
    {2, 255, 1.359175f, 4, 7, 183, 184},
    {7, 255, -1.195225f, 13, 22, 185, 186},
    {-1, 4, 0.000000f, 27, 27, -1, -1},
    {-1, 8, 0.000000f, 74, 74, -1, -1},
    {4, 255, 0.877020f, 6, 8, 187, 188},
    {6, 255, -1.071036f, 8, 25, 189, 190},
    {-1, 8, 0.000000f, 11, 11, -1, -1},
    {5, 255, -0.238063f, 10, 13, 191, 192},
    {-1, 6, 0.000000f, 5, 5, -1, -1},
    {0, 255, -0.059548f, 4, 5, 193, 194},
    {-1, 6, 0.000000f, 43, 43, -1, -1},
    {-1, 6, 0.000000f, 2, 3, -1, -1},
    {-1, 7, 0.000000f, 3, 3, -1, -1},
    {-1, 6, 0.000000f, 18, 18, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {3, 255, -0.461558f, 30, 42, 195, 196},
    {5, 255, 0.259445f, 17, 21, 197, 198},
    {0, 255, 0.608834f, 70, 73, 199, 200},
    {0, 255, 0.020785f, 3, 6, 201, 202},
    {-1, 11, 0.000000f, 1, 1, -1, -1},
    {-1, 8, 0.000000f, 19, 19, -1, -1},
    {4, 255, -1.329656f, 152, 158, 203, 204},
    {-1, 5, 0.000000f, 1, 1, -1, -1},
    {-1, 11, 0.000000f, 4, 4, -1, -1},
    {0, 255, 0.606457f, 3, 7, 205, 206},
    {5, 255, -0.533903f, 18, 23, 207, 208},
    {6, 255, -0.211769f, 60, 61, 209, 210},
    {-1, 5, 0.000000f, 6, 6, -1, -1},
    {2, 255, 0.380423f, 2, 5, 211, 212},
    {3, 255, 0.564308f, 18, 39, 213, 214},
    {6, 255, 2.084908f, 10, 13, 215, 216},
    {1, 255, 0.767145f, 40, 45, 217, 218},
    {-1, 10, 0.000000f, 4, 4, -1, -1},
    {4, 255, -0.451968f, 6, 10, 219, 220},
    {2, 255, 0.373984f, 30, 39, 221, 222},
    {4, 255, 0.077536f, 78, 138, 223, 224},
    {-1, 3, 0.000000f, 7, 7, -1, -1},
    {-1, 5, 0.000000f, 3, 3, -1, -1},
    {-1, 10, 0.000000f, 2, 2, -1, -1},
    {-1, 11, 0.000000f, 1, 1, -1, -1},
    {-1, 5, 0.000000f, 15, 15, -1, -1},
    {5, 255, 1.066745f, 5, 9, 225, 226},
    {6, 255, 1.612347f, 16, 25, 227, 228},
    {-1, 4, 0.000000f, 1, 1, -1, -1},
    {2, 255, 0.693596f, 7, 8, 229, 230},
    {-1, 4, 0.000000f, 6, 6, -1, -1},
    {-1, 4, 0.000000f, 1, 2, -1, -1},
    {-1, 5, 0.000000f, 3, 3, -1, -1},
    {5, 255, -0.381154f, 3, 6, 231, 232},
    {4, 255, -0.304928f, 5, 11, 233, 234},
    {4, 255, 0.729569f, 56, 62, 235, 236},
    {-1, 9, 0.000000f, 7, 7, -1, -1},
    {-1, 3, 0.000000f, 1, 1, -1, -1},
    {-1, 3, 0.000000f, 4, 4, -1, -1},
    {-1, 4, 0.000000f, 2, 3, -1, -1},
    {7, 255, -1.390345f, 13, 17, 237, 238},
    {-1, 3, 0.000000f, 5, 5, -1, -1},
    {-1, 8, 0.000000f, 6, 6, -1, -1},
    {-1, 1, 0.000000f, 2, 2, -1, -1},
    {0, 255, -0.940896f, 8, 11, 239, 240},
    {2, 255, -0.479653f, 8, 14, 241, 242},
    {-1, 6, 0.000000f, 2, 2, -1, -1},
    {0, 255, -0.372249f, 10, 11, 243, 244},
    {-1, 6, 0.000000f, 4, 4, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {7, 255, -0.569871f, 29, 34, 245, 246},
    {2, 255, -0.273056f, 7, 8, 247, 248},
    {4, 255, 0.864846f, 17, 19, 249, 250},
    {-1, 1, 0.000000f, 2, 2, -1, -1},
    {6, 255, -0.334893f, 70, 72, 251, 252},
    {-1, 1, 0.000000f, 1, 1, -1, -1},
    {-1, 7, 0.000000f, 3, 3, -1, -1},
    {-1, 6, 0.000000f, 3, 3, -1, -1},
    {-1, 8, 0.000000f, 1, 1, -1, -1},
    {0, 255, -1.352717f, 152, 157, 253, 254},
    {-1, 5, 0.000000f, 3, 4, -1, -1},
    {-1, 10, 0.000000f, 3, 3, -1, -1},
    {-1, 10, 0.000000f, 5, 5, -1, -1},
    {-1, 0, 0.000000f, 18, 18, -1, -1},
    {-1, 0, 0.000000f, 1, 2, -1, -1},
    {-1, 0, 0.000000f, 59, 59, -1, -1},
    {-1, 3, 0.000000f, 2, 3, -1, -1},
    {-1, 4, 0.000000f, 2, 2, -1, -1},
    {4, 255, -0.162136f, 7, 18, 255, 256},
    {1, 255, 0.606319f, 16, 21, 257, 258},
    {-1, 10, 0.000000f, 9, 9, -1, -1},
    {-1, 5, 0.000000f, 3, 4, -1, -1},
    {1, 255, 0.403582f, 40, 43, 259, 260},
    {-1, 10, 0.000000f, 2, 2, -1, -1},
    {-1, 0, 0.000000f, 4, 4, -1, -1},
    {-1, 10, 0.000000f, 6, 6, -1, -1},
    {1, 255, 0.391157f, 28, 29, 261, 262},
    {5, 255, 0.668874f, 6, 10, 263, 264},
    {5, 255, -0.585868f, 30, 79, 265, 266},
    {6, 255, 2.259516f, 48, 59, 267, 268},
    {-1, 5, 0.000000f, 5, 5, -1, -1},
    {-1, 10, 0.000000f, 4, 4, -1, -1},
    {4, 255, 1.462781f, 16, 22, 269, 270},
    {-1, 5, 0.000000f, 3, 3, -1, -1},
    {-1, 3, 0.000000f, 1, 1, -1, -1},
    {-1, 9, 0.000000f, 7, 7, -1, -1},
    {-1, 10, 0.000000f, 3, 3, -1, -1},
    {-1, 3, 0.000000f, 2, 3, -1, -1},
    {0, 255, 1.751160f, 5, 6, 271, 272},
    {-1, 4, 0.000000f, 5, 5, -1, -1},
    {1, 255, 2.025362f, 56, 61, 273, 274},
    {-1, 4, 0.000000f, 1, 1, -1, -1},
    {-1, 3, 0.000000f, 2, 3, -1, -1},
    {4, 255, -0.671440f, 12, 14, 275, 276},
    {-1, 8, 0.000000f, 8, 8, -1, -1},
    {-1, 6, 0.000000f, 3, 3, -1, -1},
    {-1, 1, 0.000000f, 7, 8, -1, -1},
    {-1, 6, 0.000000f, 3, 6, -1, -1},
    {-1, 1, 0.000000f, 10, 10, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {-1, 6, 0.000000f, 4, 8, -1, -1},
    {-1, 7, 0.000000f, 25, 26, -1, -1},
    {-1, 7, 0.000000f, 1, 1, -1, -1},
    {-1, 1, 0.000000f, 7, 7, -1, -1},
    {-1, 6, 0.000000f, 15, 15, -1, -1},
    {-1, 6, 0.000000f, 2, 4, -1, -1},
    {-1, 7, 0.000000f, 64, 64, -1, -1},
    {-1, 7, 0.000000f, 6, 8, -1, -1},
    {-1, 11, 0.000000f, 2, 3, -1, -1},
    {-1, 11, 0.000000f, 150, 154, -1, -1},
    {-1, 0, 0.000000f, 7, 8, -1, -1},
    {-1, 8, 0.000000f, 4, 10, -1, -1},
    {-1, 0, 0.000000f, 2, 4, -1, -1},
    {-1, 5, 0.000000f, 16, 17, -1, -1},
    {-1, 9, 0.000000f, 1, 1, -1, -1},
    {-1, 0, 0.000000f, 40, 42, -1, -1},
    {-1, 9, 0.000000f, 1, 1, -1, -1},
    {-1, 4, 0.000000f, 28, 28, -1, -1},
    {-1, 9, 0.000000f, 6, 8, -1, -1},
    {-1, 4, 0.000000f, 2, 2, -1, -1},
    {-1, 10, 0.000000f, 22, 30, -1, -1},
    {-1, 3, 0.000000f, 16, 49, -1, -1},
    {-1, 10, 0.000000f, 48, 56, -1, -1},
    {-1, 3, 0.000000f, 3, 3, -1, -1},
    {-1, 11, 0.000000f, 16, 20, -1, -1},
    {-1, 10, 0.000000f, 2, 2, -1, -1},
    {-1, 5, 0.000000f, 1, 1, -1, -1},
    {-1, 3, 0.000000f, 5, 5, -1, -1},
    {-1, 3, 0.000000f, 50, 52, -1, -1},
    {-1, 3, 0.000000f, 6, 9, -1, -1},
    {-1, 4, 0.000000f, 12, 13, -1, -1},
    {-1, 3, 0.000000f, 1, 1, -1, -1}
};

//===========================================================================
// DT Inference Functions
//===========================================================================

#define DT_READ_NODE(idx) ({ \
    dt_node_t _n; \
    memcpy_P(&_n, &DT_NODES[idx], sizeof(dt_node_t)); \
    _n; })

static inline uint8_t dt_predict(const float* features) {
    uint16_t nodeIdx = 0;
    dt_node_t node = DT_READ_NODE(nodeIdx);
    
    while (node.featureIndex >= 0) {
        if (features[node.featureIndex] < node.threshold) {
            nodeIdx = node.leftChild;
        } else {
            nodeIdx = node.rightChild;
        }
        node = DT_READ_NODE(nodeIdx);
    }
    return node.label;
}

static inline uint8_t dt_predict_with_confidence(const float* features, float* confidence_out) {
    uint16_t nodeIdx = 0;
    dt_node_t node = DT_READ_NODE(nodeIdx);
    while (node.featureIndex >= 0) {
        if (features[node.featureIndex] < node.threshold) {
            nodeIdx = node.leftChild;
        } else {
            nodeIdx = node.rightChild;
        }
        node = DT_READ_NODE(nodeIdx);
    }
    if (confidence_out) {
        // Laplace-smoothed leaf confidence with stronger prior and heavier support damping
        const float total = (float)node.totalSamples;
        const float majority = (float)node.majorityCount;
        const float laplace = (majority + 0.5f) / (total + (float)DT_NUM_CLASSES);
        const float support = total / (total + 20.0f);
        *confidence_out = laplace * support;
    }
    return node.label;
}

static inline const char* dt_get_class_name(uint8_t idx) {
    return (idx < 12) ? DT_CLASS_NAMES[idx] : "unknown";
}

#endif // DT_MODEL_DATA_H
